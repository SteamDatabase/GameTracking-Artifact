// TOWERS DESTROYED = GAME WIN LOSE ==================================================================================
//====================================================================================================================


// note: responses use above criterion to force the response to wait until after the camera move has finished ( set at 4 seconds here )  -- OPPONENT NOT SETUP LIKE THIS YET AS HE IS CURRENTLY VISIBLE DURING THE MOVE.

// player wins:
//===============


// player reaction to player win:


Rule rule_imps_end_game_player_win_wait_player
{
	criteria Victory IsLocalImp  
	response imps_end_game_player_win_wait_player
}

Rule rule_imps_IsChainingToPlayerWaitGameVictory
{
	criteria Special IsLocalImp IsChainingToPlayerWaitGameVictory   
	response imps_end_game_player_win_player
}



// opponent reaction to player win:


Rule rule_imps_end_game_player_win_opponent
{
	criteria Victory IsOpponentImp  
	response imps_end_game_player_win_opponent
}



// opponent wins:
//=================


// player reaction to opponent win:


Rule rule_imps_end_game_opponent_win_player
{
	criteria Defeat IsLocalImp  
	response imps_end_game_opponent_win_player
}


// opponent reaction to opponent win:


Rule rule_imps_end_game_opponent_win_opponent
{
	criteria Defeat IsOpponentImp  
	response imps_end_game_opponent_win_opponent
}



///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//  BLUE_BUTTON
//-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// the player context here is: whoever plays the card, they have the blue button active. So player plays / player reacts is the players reaction to their own pass coin having turned blue.



//-----------------------------------------------------------------------------
// PLAYER PLAYS CARD: blue_button: Timer
//-----------------------------------------------------------------------------


// Player reacts:  ------------------------------------------------------------


Rule rule_imps_dev_blue_button_TIMER_Pp_Pr
{

    Criteria Timer IsNotCombat IsActionPhase IsLocalImp  ThisIsImportant IsLocalVictoryCoin IsTimeRemainingInLane p_var_hold_blue_button

    ApplyContext "p_var_hold_blue_button:1:60"
    ApplyContextToWorld

    Response imps_dev_blue_button_Pp_Pr_chain_intro

}

Rule rule_imps_dev_blue_button_TIMER_Pp_Pr_CHAIN_outro
{

    Criteria Special ThisIsImportant p_var_chains_dev_blue_button_ IsLocalImp

    Response imps_dev_blue_button_Pp_Pr_chain_outro

}


// Opponent reacts:  ------------------------------------------------------------


Rule rule_imps_dev_blue_button_TIMER_Op_Or
{

    Criteria Timer IsNotCombat IsActionPhase IsOpponentImp  ThisIsImportant IsTimeRemainingInLane IsOpponentVictoryCoin o_var_hold_blue_button

    ApplyContext "o_var_hold_blue_button:1:60"
    ApplyContextToWorld

    Response imps_dev_blue_button_Op_Or

}

